Я потратил много времени на написание проекта потом столкнулся с проблемой.
Я хотел, что бы клиент и сервер обменивались сообщениями с примерно такой структурой:
[код команды][длина имени клиента][имя клиента][длина имени файла][имя файла][размер файла][файл]
Но проблема в том, что я не мог придумать, как делать такой фрейм. Сейчас я пришел к тому, что это все представляет собой строку,
которую я преобразую в массив строк. И в зависимости от того, чему равен первый элемент массива, я обрабатываю этот массив 
соответствующим образом. Но вроде так стало проще. Есть еще момент, сам сервер организован с использованием Netty. Но когда клиент хочет 
скачать файл, то сервер открывает этот файл и отправляет в сеть используя NIO и ByteBuffer. Как я понял, буфер позволяет быстрее работать
с большими файлами. Но сомнения в том, что нужно ли вообще использовать NIO или лучше срествами Netty. Но не очень понял, как открыть файл 
для чтения или записи и считать или записать данные с помощью Netty. Думаю, что для этого NIO подойдет. 
То есть повторюсь, сеть работает через Netty на стороне сервера, но сам файл для чтения или записи открываю средствами NIO. Правильно ли это?
Есть еще вопрос, файл когда считывается, то метод read() возвращает количество считанных байтов либо -1, когда файл закончился. 
Возникает вопрос: нужно ли вообще передавать по сети размер файла. Может просто проверять, не вернулось ли значени -1?
Еще вопрос: в первом контейнера конвеера на стороне сервера у меня происходит авторизация клиента, то есть открывается БД и выполняется 
SQL запрос. В одной статье вычитал, что первый контейнер должен совершать минимальный объем работы. Так вот вопрос, стоит ли работать с БД
в первом же Handler?